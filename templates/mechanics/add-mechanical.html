{% extends "base.html" %}
{% block title %}
Add Mechanical
{% endblock title %}
{% block content %}
<style>
  .tr {
    border: none !important;
  }
</style>


<main id="main" style="margin: 7rem 0rem 2rem 0rem;">
  <h3 class="h3">Add Mechanics</h3>
  <div class="container">
    <div class="card card-body w-50 mx-auto" style="border: none;">
      <form action="" method="post" class="px-3" enctype="multipart/form-data">
        <div class="my-3">
          <input type="text" class="form-control" name="username" id="username" placeholder="Username" />
        </div>
        <div class="my-3">
          <input type="text" class="form-control" name="name" id="name" placeholder="Full Name" />
        </div>
        <div class="my-3">
          <input type="text" class="form-control" name="phone" id="phone" placeholder="Phone" />
        </div>

        <div class="mb-3">
          <textarea class="form-control" name="address" id="address" rows="3" placeholder="Address"></textarea>
        </div>
        <div class="my-3">
          <input type="text" class="form-control" name="experience" id="experience" placeholder="Experience" />
        </div>
        <div class="my-3">
          <input type="text" class="form-control" name="specialization" id="specialization"
            placeholder="Specialization" />
        </div>
        <div class="my-3">
          <input type="text" class="form-control" name="rating" id="rating" placeholder="Rating" />
        </div>
        <div class="my-3">
          <input type="text" class="form-control" name="service_count" id="service_count" placeholder="Service Count" />
        </div>


        <div class="mt-5 d-flex justify-content-center">
          <button type="button" id="add_mech" class="btn btn-primary w-100 py-2">Add</button>
        </div>


      </form>
    </div>
  </div>
</main>


<script>
  add_mech = document.getElementById('add_mech')
  add_mech.addEventListener('click', () => {
    var mech_url = "/addmechanic"
    data_req = {
      username: document.getElementById('username').value,
      name: document.getElementById('name').value,
      phone: document.getElementById('phone').value,
      address: document.getElementById('address').value,
      experience: document.getElementById('experience').value,
      specialization: document.getElementById('specialization').value,
      services: document.getElementById('service_count').value,
    }
    console.log(data_req)
    var requestOptions = {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data_req)
    };
    fetch(mech_url, requestOptions)
      .then(response => {
        if (response.ok) {
          // Request was successful
          return response.json(); // Parse response data as JSON
        } else {
          // Request failed
          throw new Error('Request failed with status ' + response.status);
        }
      })
      .then(data => {
        // Handle the response dat
        window.location.href = "/"
      })
      .catch(error => {
        // Handle any errors that occurred during the request
        console.log('Error:', error);
      });

  })
</script>


{% endblock content %}